<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html/admin

    # Fichier d'index par défaut pour l'admin
    DirectoryIndex index.php

    # Configuration pour la partie admin uniquement
    <Directory /var/www/html/admin>
        # Désactiver l'affichage de la liste des fichiers (Indexes)
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Réécriture d'URL pour l'admin
        RewriteEngine On
        RewriteBase /
        
        # Rediriger la racine admin vers index.php
        RewriteCond %{REQUEST_URI} ^/$
        RewriteRule ^$ index.php [L,R=301]
        
        # Redirection vers index.php si fichier/dossier n'existe pas
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php [L]
    </Directory>

    # Configuration des assets admin
    <Directory /var/www/html/admin/css>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    <Directory /var/www/html/admin/js>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    # Configuration des images admin
    <Directory /var/www/html/admin/images>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    # Accès aux partials admin
    <Directory /var/www/html/admin/adminpartials>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

