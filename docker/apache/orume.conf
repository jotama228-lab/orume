<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    # Fichier d'index par défaut
    DirectoryIndex acceuil.php index.php index.html

    # Configuration pour la partie publique uniquement (racine)
    <Directory /var/www/html>
        # Désactiver l'affichage de la liste des fichiers (Indexes)
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Réécriture d'URL pour la partie publique
        RewriteEngine On
        RewriteBase /
        
        # Rediriger la racine vers acceuil.php
        RewriteCond %{REQUEST_URI} ^/$
        RewriteRule ^$ acceuil.php [L,R=301]
        
        # Bloquer l'accès au dossier admin depuis le frontend
        RewriteRule ^admin(/.*)?$ - [F,L]
        
        # Redirection vers acceuil.php si fichier/dossier n'existe pas
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_URI} !^/admin
        RewriteRule ^(.*)$ acceuil.php [L]
    </Directory>

    # Configuration des assets publics
    <Directory /var/www/html/assets>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    # Configuration des partials publics
    <Directory /var/www/html/partials>
        Options -Indexes +FollowSymLinks
        Require all granted
    </Directory>

    # Bloquer l'accès au dossier admin
    <Directory /var/www/html/admin>
        Require all denied
    </Directory>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

